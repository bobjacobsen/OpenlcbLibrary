@startuml

protocol PhysicalLayer
PhysicalLayer <|-- CanPhysicalLayer : implements
CanPhysicalLayer <|-- CanTelnetLink
CanPhysicalLayer <|-- CanUsbLink

class LinkLayer
LinkLayer <|-- CanLink

CanLink *--> CanPhysicalLayer : listener
CanLink : CanPhysicalLayer

protocol Processor
Processor : process(Message:, Node:)

struct RemoteNodeProcessor
struct LocalNodeProcessor
struct DatagramProcessor
Processor <|-- RemoteNodeProcessor
Processor <|-- LocalNodeProcessor
Processor <|-- DatagramProcessor

class Node

protocol NodeStore
NodeStore : Set<Node>
NodeStore : Set<Processor>
NodeStore : LinkLayer

struct RemoteNodeStore
NodeStore <|-- RemoteNodeStore
struct LocalNodeStore
NodeStore <|-- LocalNodeStore

class DatagramService
class MemoryService

NodeStore --> Node
NodeStore --> Processor : reference

class OpenlcbNetwork
OpenlcbNetwork *--> LinkLayer
OpenlcbNetwork --> NodeStore
OpenlcbNetwork --> DatagramService
OpenlcbNetwork --> MemoryService

MemoryService *-->  DatagramService

@enduml
